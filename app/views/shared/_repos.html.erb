<% lang_index = 0 %>

<ul class="nav nav-tabs" data-tabs="tabs" id="repo-tabs">
  <% repos.group_by(&:language).each do |lang, repos| %>
    <% unless lang == nil %>
      <li><a href="#<%= lang.parameterize %>" data-toggle="tab"><%= lang %></a></li>
    <% end -%>
  <% end -%>
</ul>

<div class="tab-content">
  <% repos.group_by(&:language).each do |lang, repos| %>
    <% unless lang == nil %>
      <div class="tab-pane<%= " active" if lang_index == 0 %>" id="<%= lang.parameterize %>">
        <ul class="unstyled repos-list">
          <% repos.each do |repo| %>
            <li>
              <span class="badge badge-info"><%= repo.issues_count %></span>
              <h4>
                <%= link_to repo.name, repo %>
                <%= " <small>(#{repo.full_name})</small> ".html_safe if repo.full_name.present? %>
              </h4>
              <p><%= raw repo.description %></p>
            </li>
          <% end -%>
        </ul>
      </div>
      <% lang_index = lang_index + 1 %>
    <% end -%>
  <% end -%>
</div>
<%= link_to "Submit a Repo", new_repo_path, :class => 'btn btn-success' %>
